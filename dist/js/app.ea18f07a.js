(function(){"use strict";var e={6682:function(e,t,s){s.d(t,{l:function(){return hn}});var n=s(9242),i=s(3396);function a(e,t,s,n,a,l){const o=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(o)}var l={name:"App"},o=s(89);const r=(0,o.Z)(l,[["render",a]]);var c=r,d=s(678);const u={class:"flex flex-column h-full",style:{"min-width":"400px"}},m={class:"w-full surface-card flex justify-content-between align-items-center px-3",style:{"min-height":"60px"}},p=(0,i._)("div",{class:"text-2xl font-monomaniac mb-2"},[(0,i.Uk)("Node"),(0,i._)("span",{class:"text-primary"},"Core")],-1),h={class:"flex-auto flex w-full flex-column mx-auto px-4 mt-3 gap-3",style:{"max-width":"900px"}},g=(0,i._)("p",{class:"m-0 text-200"},"System",-1),f={class:"relativ justify-content-between gap-3 flex fadein animation-duration-100"},w={class:"md:hidden fadein animation-duration-100"},x={class:"flex-auto relativ gap-3 flex flex-row fadein animation-duration-100"},b={key:0,class:"w-full md:w-4 md:h-full flex flex-column gap-3 fadein animation-duration-100"},v=(0,i._)("p",{class:"m-0 text-200"},"Entities",-1),y={class:"surface-card p-2 border-round-md relativ"},k={class:"w-full mb-2 flex justify-content-between align-items-center"},_=(0,i._)("p",{class:"m-0 ml-1 text-sm"},"Instances",-1),E={key:0,class:"text-xs text-300 text-center"},V={class:"surface-card p-2 border-round-md relativ"},T={class:"w-full mb-2 flex justify-content-between align-items-center"},I=(0,i._)("p",{class:"m-0 ml-1 text-sm"},"Redirects",-1),S={key:0,class:"text-xs text-300 text-center"},A={key:1,class:"w-full md:w-8 flex-column h-min border-round-md flex fadein animation-duration-100 overflow-hidden"},$=(0,i._)("div",{class:"w-full h-3rem flex justify-content-center align-items-center gap-1"},[(0,i._)("i",{class:"pi pi-link text-300"}),(0,i.Uk)(),(0,i._)("a",{href:"#",class:"no-underline text-300"},"oocastor")],-1);function D(e,t,s,n,a,l){const o=(0,i.up)("Avatar"),r=(0,i.up)("Menu"),c=(0,i.up)("serverInfo"),d=(0,i.up)("overview"),D=(0,i.up)("Button"),W=(0,i.up)("objListItem"),N=(0,i.up)("instanceView"),C=(0,i.up)("redirectUpdateView"),P=(0,i.up)("instanceUpdateView"),U=(0,i.up)("Toast"),R=(0,i.up)("settings");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",u,[(0,i._)("div",m,[p,(0,i.Wm)(o,{class:"surface-section cursor-pointer",icon:"pi pi-user",onClick:l.toggleAvatarMenu},null,8,["onClick"])]),(0,i.Wm)(r,{ref:"menu",model:a.items,popup:!0},null,8,["model"]),(0,i._)("div",h,[g,(0,i._)("div",f,[(0,i.Wm)(c,{current:this.sys.mem.used,max:this.sys.mem.total,str:"RAM",op:"GB"},null,8,["current","max"]),(0,i.Wm)(c,{current:this.sys.cpu,max:"100",str:"CPU",op:"%"},null,8,["current"])]),(0,i._)("div",w,[(0,i.Wm)(d,{redirects:a.redirects,instances:a.instances},null,8,["redirects","instances"])]),(0,i._)("div",x,[a.screen.width<770&&0==a.view||a.screen.width>=770?((0,i.wg)(),(0,i.iD)("div",b,[v,(0,i._)("div",y,[(0,i._)("div",k,[_,(0,i.Wm)(D,{icon:"pi pi-plus",class:"-m-1 bg-white-a15 text-color",style:{transform:"scale(0.7)"},onClick:t[0]||(t[0]=e=>{l.openInstanceUpdateView()})})]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.instances,((e,t)=>((0,i.wg)(),(0,i.j4)(W,{key:t,icon:"pi-server",name:e.name,status:e.status,onClick:t=>l.openInstanceView(e._id)},null,8,["name","status","onClick"])))),128)),a.instances.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",E,"no instances found"))]),(0,i._)("div",V,[(0,i._)("div",T,[I,(0,i.Wm)(D,{icon:"pi pi-plus",class:"-m-1 bg-white-a15 text-color",style:{transform:"scale(0.7)"},onClick:t[1]||(t[1]=e=>a.proxy?.enabled?l.openRedirectView():l.showNotification({error:!0,msg:"Cannot create redirects with proxy disabled",payload:null}))})]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.redirects,((e,t)=>((0,i.wg)(),(0,i.j4)(W,{key:t,icon:"pi-arrow-right-arrow-left text-xs",name:e.name,status:e.status,onClick:t=>{l.openRedirectView(e)}},null,8,["name","status","onClick"])))),128)),a.redirects.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",S,"no redirects found"))])])):(0,i.kq)("",!0),a.screen.width>=770||0!=a.view?((0,i.wg)(),(0,i.iD)("div",A,[0==a.view?((0,i.wg)(),(0,i.j4)(d,{key:0,redirects:a.redirects,instances:a.instances},null,8,["redirects","instances"])):(0,i.kq)("",!0),1==a.view?((0,i.wg)(),(0,i.j4)(N,{key:1,selectedInstanceId:a.selectedInstanceId,openInstanceUpdateView:l.openInstanceUpdateView,ref:"instanceView"},null,8,["selectedInstanceId","openInstanceUpdateView"])):(0,i.kq)("",!0),2==a.view?((0,i.wg)(),(0,i.j4)(C,{key:2,ref:"redirectUpdateView"},null,512)):(0,i.kq)("",!0),3==a.view?((0,i.wg)(),(0,i.j4)(P,{key:3,ref:"instanceUpdateView"},null,512)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),$])]),(0,i.Wm)(U,{style:{width:"70%","max-width":"400px"}}),(0,i.Wm)(R,{ref:"settings"},null,512)],64)}var W=s(5481),N=s(7528),C=s(1826),P=s(6823),U=s(7139);const R={class:"flex-1 p-4 surface-card h-full border-round-md flex flex-column select-none"},O={class:"m-0 mb-2 -mt-2 font-mono text-lg"},j={class:"flex font align-items-baseline text-200 gap-2 mb-3"},Z={class:"md:text-5xl text-2xl m-0 font-bold text-color"},G=(0,i._)("p",{class:"text-xl m-0 hidden md:block"},"/",-1),z={class:"text-xl m-0 hidden md:block"},q={class:"m-0 text-sm"};function L(e,t,s,n,a,l){const o=(0,i.up)("ProgressBar");return(0,i.wg)(),(0,i.iD)("div",R,[(0,i._)("p",O,(0,U.zw)(s.str),1),(0,i._)("div",j,[(0,i._)("p",Z,(0,U.zw)(s.current),1),G,(0,i._)("p",z,(0,U.zw)(s.max),1),(0,i._)("p",q,(0,U.zw)(s.op),1)]),(0,i.Wm)(o,{class:"w-full h-1rem border-round-md",value:s.current/s.max*100,showValue:!1},null,8,["value"])])}var B=s(1492),M={name:"serverInfo",props:{current:String,max:String,op:String,str:String},components:{ProgressBar:B.Z}};const J=(0,o.Z)(M,[["render",L]]);var Y=J;const F={class:"w-full h-4rem border-round-sm mb-2 p-3 bg-instance-item cursor-pointer flex align-items-center gap-3 select-none"},H={class:"flex-auto text-sm name"};function K(e,t,s,n,a,l){const o=(0,i.up)("Avatar"),r=(0,i.up)("Button");return(0,i.wg)(),(0,i.iD)("div",F,[(0,i.Wm)(o,{icon:"pi pi-server",style:(0,U.j5)({backgroundColor:l.getColorByStatus(s.status)}),class:"flex-none"},null,8,["style"]),(0,i._)("p",H,(0,U.zw)(s.name),1),(0,i.Wm)(r,{icon:"pi pi-angle-right",class:"p-button-xs p-button-rounded surface-100 text-white flex-none"})])}var Q={props:{name:String,status:Number},components:{Button:C.Z,Avatar:N.Z},methods:{getColorByStatus(e){switch(e){case 0:return"var(--red-600)";case 1:return"var(--green-600)";case 2:return"var(--orange-600)";case 3:return"var(--blue-600)";default:return""}}}};const X=(0,o.Z)(Q,[["render",K],["__scopeId","data-v-be6b649e"]]);var ee=X;const te={class:"flex-1 surface-section h-7rem border-round-md flex flex-column align-items-center justify-content-center select-none"},se={class:"text-sm m-0 mt-2 text-gray-400"};function ne(e,t,s,n,a,l){return(0,i.wg)(),(0,i.iD)("div",te,[(0,i._)("p",{class:"text-5xl m-0 font-bold",style:(0,U.j5)({color:s.color})},(0,U.zw)(s.num),5),(0,i._)("p",se,(0,U.zw)(s.str),1)])}var ie={props:{num:Number,str:String,color:String}};const ae=(0,o.Z)(ie,[["render",ne]]);var le=ae;const oe=e=>((0,i.dD)("data-v-71e85646"),e=e(),(0,i.Cn)(),e),re={key:0},ce={class:"m-0 text-200 mb-3 text-overflow"},de={class:"w-full flex flex-column gap-3 surface-card border-round p-3"},ue={class:"flex justify-content-between"},me={class:"flex align-items-center gap-3 w-8"},pe={class:"text-3xl m-0 font-bold text-overflow"},he={class:"flex gap-3"},ge={class:"flex align-item-center"},fe={key:0,class:"flex gap-2 align-item-center"},we=oe((()=>(0,i._)("i",{class:"pi pi-link text-300"},null,-1))),xe=["href"],be=["href"],ve={class:"text-sm ml-auto m-0 text-gray-400 font-mono"},ye={class:"p-buttonset w-full flex"},ke=oe((()=>(0,i._)("p",{class:"m-0 mt-2 text-sm font-mono"},"Stats",-1))),_e={class:"flex gap-2"},Ee=oe((()=>(0,i._)("p",{class:"m-0 mt-2 text-sm font-mono"},"Logs",-1)));function Ve(e,t,s,n,a,l){const o=(0,i.up)("Chip"),r=(0,i.up)("Button"),c=(0,i.up)("countItem"),d=(0,i.up)("Textarea");return a.selectedInstance?((0,i.wg)(),(0,i.iD)("div",re,[(0,i._)("p",ce,"Instance ("+(0,U.zw)(a.selectedInstance.name)+")",1),(0,i._)("div",de,[(0,i._)("div",ue,[(0,i._)("div",me,[(0,i._)("p",pe,(0,U.zw)(a.selectedInstance.name),1),1==a.selectedInstance.status?((0,i.wg)(),(0,i.j4)(o,{key:0,label:"running",icon:"pi pi-check",class:"text-xs bg-green-600"})):(0,i.kq)("",!0),-1==a.selectedInstance.status?((0,i.wg)(),(0,i.j4)(o,{key:1,label:"stopped",icon:"pi pi-exclamation-triangle",class:"text-xs bg-red-600"})):(0,i.kq)("",!0),0==a.selectedInstance.status?((0,i.wg)(),(0,i.j4)(o,{key:2,label:"stopped",icon:"pi pi-times",class:"text-xs bg-red-600"})):(0,i.kq)("",!0),2==a.selectedInstance.status?((0,i.wg)(),(0,i.j4)(o,{key:3,label:"restarting",icon:"pi pi-stopwatch",class:"text-xs bg-orange-600"})):(0,i.kq)("",!0),3==a.selectedInstance.status?((0,i.wg)(),(0,i.j4)(o,{key:4,label:"updating",icon:"pi pi-stopwatch",class:"text-xs bg-blue-600"})):(0,i.kq)("",!0)]),(0,i._)("div",he,[(0,i._)("i",{class:"pi pi-cog text-xl text-gray-400 cursor-pointer",onClick:t[0]||(t[0]=e=>{s.openInstanceUpdateView(a.selectedInstance)})}),(0,i._)("i",{class:"pi pi-times text-xl text-gray-400 cursor-pointer",onClick:t[1]||(t[1]=e=>{this.$EVENT.emit("changeView",0)})})])]),(0,i._)("div",ge,[a.selectedInstance.network.isAccessable?((0,i.wg)(),(0,i.iD)("div",fe,[we,"@"!=a.selectedInstance.network.redirect.sub?((0,i.wg)(),(0,i.iD)("a",{key:0,class:"no-underline text-gray-400 font-mono",href:`https://${a.selectedInstance.network.redirect.sub}.${a.selectedInstance.network.redirect.domain}`},(0,U.zw)(a.selectedInstance.network.redirect.sub)+"."+(0,U.zw)(a.selectedInstance.network.redirect.domain),9,xe)):((0,i.wg)(),(0,i.iD)("a",{key:1,class:"no-underline text-gray-400 font-mono",href:`https://${a.selectedInstance.network.redirect.domain}`},(0,U.zw)(a.selectedInstance.network.redirect.domain),9,be))])):(0,i.kq)("",!0),(0,i._)("p",ve,"Version "+(0,U.zw)(a.selectedInstance.version),1)]),(0,i._)("span",ye,[(0,i.Wm)(r,{loading:2==a.selectedInstance.status,label:0==a.selectedInstance.status?"Start":"Restart",icon:"pi pi-refresh",class:"p-button-sm flex-auto bg-white-a15 text-white",onClick:t[2]||(t[2]=e=>{l.startAction(1==this.selectedInstance.status?2:1)})},null,8,["loading","label"]),(0,i.Wm)(r,{label:"Stop",icon:"pi pi-stop",class:"p-button-sm flex-auto bg-white-a15 text-white",onClick:t[3]||(t[3]=e=>{l.startAction(0)})}),(0,i.Wm)(r,{label:"Update",icon:"pi pi-download",class:"p-button-sm flex-auto bg-white-a15 text-white",onClick:t[4]||(t[4]=e=>{l.startAction(3)})})]),ke,(0,i._)("div",_e,[(0,i.Wm)(c,{str:"RAM",num:a.selectedInstance.pm2?.monit.memory||0,color:"var(--white)"},null,8,["num"]),(0,i.Wm)(c,{str:"CPU",num:a.selectedInstance.pm2?.monit.cpu||0,color:"var(--white)"},null,8,["num"])]),Ee,(0,i.Wm)(d,{class:"w-full h-10rem bg-white-a05 border-none overflow-y-scroll font-mono",autoResize:"false",readonly:"",value:a.selectedInstance.pm2?.log||""},null,8,["value"])])])):(0,i.kq)("",!0)}var Te=s(3337),Ie=s(8077),Se={data(){return{selectedInstance:null}},components:{countItem:le,Button:C.Z,Textarea:Te.Z,Chip:Ie.Z},props:{selectedInstanceId:String,openInstanceUpdateView:Function},methods:{startAction(e){this.$STORAGE.socket.emit("instance:action",{_id:this.selectedInstance._id,status:e},(e=>{let{error:t,msg:s}=e;t?this.$EVENT.emit("showToast",{severity:"error",title:"Error",msg:s}):this.$EVENT.emit("showToast",{severity:"success",title:"Done",msg:s}),this.$EVENT.emit("update")}))},update(){this.$STORAGE.socket.emit("instance:get",{_id:this.selectedInstanceId},(e=>{let{error:t,payload:s}=e;t||(this.selectedInstance=s)}))}},created(){this.$EVENT.on("update",this.update)},unmounted(){this.$EVENT.off("update",this.update)}};const Ae=(0,o.Z)(Se,[["render",Ve],["__scopeId","data-v-71e85646"]]);var $e=Ae;const De=e=>((0,i.dD)("data-v-1d967e3f"),e=e(),(0,i.Cn)(),e),We={class:"m-0 mb-3 text-200 text-overflow"},Ne={class:"w-full flex flex-column gap-3 surface-card border-round p-3"},Ce={class:"flex justify-content-between"},Pe={class:"text-3xl m-0 font-bold"},Ue={class:"flex gap-3"},Re={class:"-mt-3"},Oe=De((()=>(0,i._)("p",{class:"my-2 text-sm"},"Name",-1))),je={class:"mt-3"},Ze=De((()=>(0,i._)("p",{class:"my-2 text-sm"},[(0,i.Uk)("Script "),(0,i._)("span",{class:"text-200 ml-2"},"(optional)")],-1))),Ge={key:0},ze=De((()=>(0,i._)("p",{class:"mt-3 mb-2 text-sm"},"Import",-1))),qe={class:"flex align-items-center gap-2"},Le={class:"ml-auto text-400 m-0"},Be=De((()=>(0,i._)("p",{class:"mt-0"},"Select Repo",-1))),Me=De((()=>(0,i._)("p",{class:"mt-0"},"Enter Link",-1))),Je={class:"flex align-items-center gap-2"},Ye={class:"flex align-items-center gap-2"},Fe=De((()=>(0,i._)("p",{class:"m-0"},"Public",-1))),He={class:"flex flex-column gap-3"},Ke=De((()=>(0,i._)("p",{class:"m-0 mb-2 text-sm"},"Subdomain",-1))),Qe={class:"flex w-full align-items-center gap-2",style:{height:"40px"}},Xe=De((()=>(0,i._)("p",null,".",-1))),et=De((()=>(0,i._)("p",{class:"m-0 mb-2 text-sm"},"Port",-1))),tt={class:"flex w-full align-items-center gap-2",style:{height:"40px"}},st={class:"m-0 mb-4 text-sm"},nt={class:"m-0 mb-4 text-sm"},it=De((()=>(0,i._)("p",{class:"m-0 text-red-500"},"Critical Area",-1))),at={class:"flex align-items-center"},lt=De((()=>(0,i._)("p",{class:"m-0 text-sm flex-auto"},"Delete current instance",-1))),ot={class:"flex justify-content-end gap-2"};function rt(e,t,s,n,a,l){const o=(0,i.up)("InputText"),r=(0,i.up)("Button"),c=(0,i.up)("Listbox"),d=(0,i.up)("OverlayPanel"),u=(0,i.up)("Fieldset"),m=(0,i.up)("InputSwitch"),p=(0,i.up)("Dropdown"),h=(0,i.up)("InputNumber"),g=(0,i.up)("Tag"),f=(0,i.up)("Textarea"),w=(0,i.up)("ConfirmPopup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("p",We,(0,U.zw)("CREATE"==a.instance.method?"Instance":`Instance (${a.instance.name})`),1),(0,i._)("div",Ne,[(0,i._)("div",Ce,[(0,i._)("p",Pe,(0,U.zw)("CREATE"==a.instance.method?"New Instance":"Edit Instance"),1),(0,i._)("div",Ue,[(0,i._)("i",{class:"pi pi-times text-xl text-gray-400 cursor-pointer",onClick:t[0]||(t[0]=e=>l.cancelCreationProcess(e))})])]),(0,i.Wm)(u,{legend:"Project"},{default:(0,i.w5)((()=>[(0,i._)("div",Re,[Oe,(0,i.Wm)(o,{modelValue:a.instance.name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.instance.name=e),type:"text",class:"w-full",style:{height:"40px"},placeholder:"Tomato"},null,8,["modelValue"])]),(0,i._)("div",je,[Ze,(0,i.Wm)(o,{modelValue:a.instance.script,"onUpdate:modelValue":t[2]||(t[2]=e=>a.instance.script=e),type:"text",class:"w-full",style:{height:"40px"},placeholder:"app.js"},null,8,["modelValue"])]),"CREATE"==a.instance.method?((0,i.wg)(),(0,i.iD)("div",Ge,[ze,(0,i._)("div",qe,[(0,i.Wm)(r,{label:"Github",onClick:t[3]||(t[3]=t=>{e.$refs.githubRepoSearch.toggle(t)})}),(0,i.Wm)(r,{label:"Link",class:"surface-100 border-100 text-white hover:surface-50",onClick:t[4]||(t[4]=t=>e.$refs.gitLinkInput.toggle(t))}),(0,i._)("p",Le,(0,U.zw)(a.instance.git?.name?a.instance.git.name:"empty"),1)]),(0,i.Wm)(d,{ref:"githubRepoSearch",style:{"max-height":"400px",overflow:"hidden"}},{default:(0,i.w5)((()=>[Be,(0,i.Wm)(c,{filter:"",options:a.userRepos,optionLabel:"name",style:{height:"300px","overflow-y":"scroll"},modelValue:a.instance.git,"onUpdate:modelValue":t[5]||(t[5]=e=>a.instance.git=e)},null,8,["options","modelValue"])])),_:1},512),(0,i.Wm)(d,{ref:"gitLinkInput"},{default:(0,i.w5)((()=>[Me,(0,i._)("div",Je,[(0,i.Wm)(o,{modelValue:e.linkInput,"onUpdate:modelValue":t[6]||(t[6]=t=>e.linkInput=t)},null,8,["modelValue"]),(0,i.Wm)(r,{icon:"pi pi-check",onClick:t[7]||(t[7]=()=>{e.$refs.gitLinkInput.hide(),a.instance.git=""==e.linkInput?"":{name:e.linkInput.slice(19),uri:e.linkInput,extern:!0}})})])])),_:1},512)])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(u,{collapsed:!a.instance.network.isAccessable},{legend:(0,i.w5)((()=>[(0,i._)("div",Ye,[Fe,(0,i.Wm)(m,{modelValue:l.readonlyAccessability,"onUpdate:modelValue":t[8]||(t[8]=e=>l.readonlyAccessability=e),onClick:t[9]||(t[9]=e=>{l.toggleAccessability()}),style:{transform:"scale(0.85)"}},null,8,["modelValue"])])])),default:(0,i.w5)((()=>[(0,i._)("div",He,[(0,i._)("div",null,[Ke,(0,i._)("div",Qe,[(0,i.Wm)(o,{modelValue:a.instance.network.redirect.sub,"onUpdate:modelValue":t[10]||(t[10]=e=>a.instance.network.redirect.sub=e),type:"text",class:"w-4",style:{height:"inherit"},disabled:!a.instance.network.isAccessable,placeholder:"tom"},null,8,["modelValue","disabled"]),Xe,(0,i.Wm)(p,{modelValue:a.instance.network.redirect.domain,"onUpdate:modelValue":t[11]||(t[11]=e=>a.instance.network.redirect.domain=e),options:a.available,class:"w-8",style:{height:"inherit"},disabled:!a.instance.network.isAccessable,loading:!a.available.length},null,8,["modelValue","options","disabled","loading"])])]),(0,i._)("div",null,[et,(0,i._)("div",tt,[(0,i.Wm)(h,{modelValue:a.instance.network.redirect.port,"onUpdate:modelValue":t[12]||(t[12]=e=>a.instance.network.redirect.port=e),useGrouping:!1,type:"text",class:"flex-auto",style:{height:"inherit"},disabled:!a.instance.network.isAccessable},null,8,["modelValue","disabled"]),(0,i.Wm)(r,{label:"Unused",class:"p-button-sm",style:{height:"inherit"},disabled:!a.instance.network.isAccessable,onClick:t[13]||(t[13]=e=>{l.getUnusedPort()})},null,8,["disabled"])])])])])),_:1},8,["collapsed"]),(0,i.Wm)(u,{legend:"Cmd",toggleable:!0,collapsed:!0},{default:(0,i.w5)((()=>[(0,i._)("p",st,[(0,i.Uk)("Define required setup commands for your "),(0,i.Wm)(g,{value:"node.js",class:"text-white bg-gray-900"}),(0,i.Uk)(" instance.")]),(0,i.Wm)(f,{class:"w-full h-10rem surface-50 border-none font-mono",autoResize:"false",autocorrect:"off",spellcheck:"false",modelValue:l._CMD,"onUpdate:modelValue":t[14]||(t[14]=e=>l._CMD=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(u,{legend:".env",toggleable:!0,collapsed:!0},{default:(0,i.w5)((()=>[(0,i._)("p",nt,[(0,i.Uk)("Set required environment variables for your "),(0,i.Wm)(g,{value:"node.js",class:"text-white bg-gray-900"}),(0,i.Uk)(" instance.")]),(0,i.Wm)(f,{class:"w-full h-10rem surface-50 border-none font-mono",autoResize:"false",autocorrect:"off",spellcheck:"false",modelValue:l._ENV,"onUpdate:modelValue":t[15]||(t[15]=e=>l._ENV=e)},null,8,["modelValue"])])),_:1}),"UPDATE"==a.instance.method?((0,i.wg)(),(0,i.j4)(u,{key:0,toggleable:!0,collapsed:!0},{legend:(0,i.w5)((()=>[it])),default:(0,i.w5)((()=>[(0,i._)("div",at,[lt,(0,i.Wm)(r,{label:"Delete",onClick:t[16]||(t[16]=e=>l.deleteInstance(e)),icon:"pi pi-trash",class:"bg-red-500 text-white border-none"})])])),_:1})):(0,i.kq)("",!0),(0,i._)("div",ot,[(0,i.Wm)(r,{label:"Save",onClick:t[17]||(t[17]=e=>{l.writeInstance()}),loading:a.writing},null,8,["loading"]),(0,i.Wm)(r,{label:"Cancel",class:"surface-100 border-100 text-white hover:surface-50",onClick:t[18]||(t[18]=e=>l.cancelCreationProcess(e))}),(0,i.Wm)(w)])])],64)}var ct=s(7992),dt=s(6709),ut=s(1583),mt=s(2439),pt=s(5517),ht=s(217),gt=s(9203),ft=s(573),wt=s(1901),xt={components:{Fieldset:ct.Z,InputText:dt.Z,InputNumber:ut.Z,Button:C.Z,InputSwitch:mt.Z,Dropdown:pt.Z,ConfirmPopup:ht.Z,Textarea:Te.Z,Tag:gt.Z,Listbox:ft.Z,OverlayPanel:wt.Z},computed:{_CMD:{get(){return this.instance.cmd.join("\n")},set(e){this.instance.cmd=e.split(/\n/)}},_ENV:{get(){return this.instance.env.join("\n")},set(e){this.instance.env=e.split(/\n/)}},readonlyAccessability(){return this.instance.network.isAccessable}},data(){let e=[],t=[],s={status:0,name:"",git:"",network:{isAccessable:!1,redirect:{sub:"",domain:null,port:0}},cmd:[],env:[],method:"CREATE",script:""},n=JSON.parse(JSON.stringify(s));return{instance:s,blankInstance:n,available:e,userRepos:t,writing:!1,proxy:{}}},methods:{writeInstance(){console.log(this.instance),this.writing=!0,this.$STORAGE.socket.emit("instance:write",this.instance,(e=>{let{error:t}=e;this.$EVENT.emit("showNotification",e),t||this.$EVENT.emit("changeView",0),this.writing=!1}))},getAvailableDomains(){this.$STORAGE.socket.emit("domain:list",(e=>{this.available=e.payload,"UPDATE"!=this.instance.method&&(this.instance.network.redirect.domain=this.available[0])}))},getUnusedPort(){this.$STORAGE.socket.emit("port:get",(e=>this.instance.network.redirect.port=e.payload))},getUserRepos(){this.$STORAGE.socket.emit("github:repos",(e=>this.userRepos=e.payload))},cancelCreationProcess(e){this.$EVENT.emit("changeView",0)},deleteInstance(e){this.$confirm.require({target:e.currentTarget,message:"Are you sure you want to proceed?",icon:"pi pi-exclamation-triangle",accept:()=>{this.$STORAGE.socket.emit("instance:delete",this.instance,(e=>{let{error:t}=e;this.$EVENT.emit("showNotification",e),t||this.$EVENT.emit("changeView",0)}))}})},reset(){this.instance=JSON.parse(JSON.stringify(this.blankInstance))},setPayload(e){e?(this.instance=JSON.parse(JSON.stringify(e)),this.instance.method="UPDATE"):(this.reset(),this.resetNetworkTab(),delete this.instance._id)},toggleAccessability(){this.proxy.enabled?(this.instance.network.isAccessable=!this.instance.network.isAccessable,this.resetNetworkTab()):(this.instance.network.isAccessable=!1,this.$EVENT.emit("showNotification",{error:!0,msg:"Cannot create redirects with proxy disabled",payload:null}))},resetNetworkTab(){this.getUnusedPort(),this.instance.network.redirect.domain=this.available[0]},fetchProxySettings(){this.$STORAGE.socket.emit("proxy:get",(e=>this.proxy=e.payload))}},created(){this.fetchProxySettings(),this.getAvailableDomains(),this.getUserRepos()}};const bt=(0,o.Z)(xt,[["render",rt],["__scopeId","data-v-1d967e3f"]]);var vt=bt;const yt=e=>((0,i.dD)("data-v-e785d234"),e=e(),(0,i.Cn)(),e),kt={class:"m-0 mb-3 text-200 text-overflow"},_t={class:"w-full flex flex-column p-3 gap-3 surface-card border-round"},Et={class:"flex justify-content-between"},Vt={class:"text-3xl m-0 font-bold"},Tt={class:"flex gap-3"},It={class:"flex justify-content-between align-items-center -mt-3"},St=yt((()=>(0,i._)("p",{class:"ma-0 text-sm"},"Enabled",-1))),At=yt((()=>(0,i._)("p",{class:"my-2 text-sm"},"Name",-1))),$t={class:"flex flex-column gap-3"},Dt=yt((()=>(0,i._)("p",{class:"m-0 mb-2 text-sm"},"Subdomain",-1))),Wt={class:"flex w-full align-items-center gap-2",style:{height:"40px"}},Nt=yt((()=>(0,i._)("p",null,".",-1))),Ct=yt((()=>(0,i._)("p",{class:"m-0 mb-2 text-sm"},"Port",-1))),Pt={class:"flex w-full align-items-center gap-2",style:{height:"40px"}},Ut=yt((()=>(0,i._)("p",{class:"m-0 text-red-500"},"Critical Area",-1))),Rt={class:"flex align-items-center"},Ot=yt((()=>(0,i._)("p",{class:"m-0 text-sm flex-auto"},"Delete current redirect",-1))),jt={class:"flex justify-content-end gap-2"};function Zt(e,t,s,n,a,l){const o=(0,i.up)("InputSwitch"),r=(0,i.up)("InputText"),c=(0,i.up)("Fieldset"),d=(0,i.up)("Dropdown"),u=(0,i.up)("InputNumber"),m=(0,i.up)("Button"),p=(0,i.up)("ConfirmPopup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("p",kt,(0,U.zw)("UPDATE"==this.redirect.method?`Redirect (${a.redirect.name})`:"Redirect"),1),(0,i._)("div",_t,[(0,i._)("div",Et,[(0,i._)("p",Vt,(0,U.zw)("UPDATE"!=this.redirect.method?"New Redirect":"Update Redirect"),1),(0,i._)("div",Tt,[(0,i._)("i",{class:"pi pi-times text-xl text-gray-400 cursor-pointer",onClick:t[0]||(t[0]=e=>l.cancelCreationProcess(e))})])]),(0,i.Wm)(c,{legend:"Info"},{default:(0,i.w5)((()=>[(0,i._)("div",It,[St,(0,i.Wm)(o,{modelValue:a.redirect.status,"onUpdate:modelValue":t[1]||(t[1]=e=>a.redirect.status=e),trueValue:1,falseValue:0},null,8,["modelValue"])]),At,(0,i.Wm)(r,{modelValue:a.redirect.name,"onUpdate:modelValue":t[2]||(t[2]=e=>a.redirect.name=e),type:"text",class:"w-full",style:{height:"40px"},placeholder:"Potato"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(c,{legend:"Network"},{default:(0,i.w5)((()=>[(0,i._)("div",$t,[(0,i._)("div",null,[Dt,(0,i._)("div",Wt,[(0,i.Wm)(r,{modelValue:a.redirect.network.sub,"onUpdate:modelValue":t[3]||(t[3]=e=>a.redirect.network.sub=e),type:"text",class:"w-4",style:{height:"inherit"},placeholder:"pot"},null,8,["modelValue"]),Nt,(0,i.Wm)(d,{modelValue:a.redirect.network.domain,"onUpdate:modelValue":t[4]||(t[4]=e=>a.redirect.network.domain=e),options:a.available,class:"w-8",style:{height:"inherit"},loading:!a.available.length},null,8,["modelValue","options","loading"])])]),(0,i._)("div",null,[Ct,(0,i._)("div",Pt,[(0,i.Wm)(u,{modelValue:a.redirect.network.port,"onUpdate:modelValue":t[5]||(t[5]=e=>a.redirect.network.port=e),useGrouping:!1,type:"text",class:"flex-auto",style:{height:"inherit"}},null,8,["modelValue"]),(0,i.Wm)(m,{label:"Unused",class:"p-button-sm",style:{height:"inherit"},onClick:t[6]||(t[6]=e=>{l.getUnusedPort()})})])])])])),_:1}),"UPDATE"==this.redirect.method?((0,i.wg)(),(0,i.j4)(c,{key:0,toggleable:!0,collapsed:!0},{legend:(0,i.w5)((()=>[Ut])),default:(0,i.w5)((()=>[(0,i._)("div",Rt,[Ot,(0,i.Wm)(m,{label:"Delete",onClick:t[7]||(t[7]=e=>l.deleteInstance(e)),icon:"pi pi-trash",class:"bg-red-500 text-white border-none"})])])),_:1})):(0,i.kq)("",!0),(0,i._)("div",jt,[(0,i.Wm)(m,{label:"Save",onClick:t[8]||(t[8]=e=>l.writeRedirect()),loading:a.writing},null,8,["loading"]),(0,i.Wm)(m,{label:"Cancel",class:"surface-100 text-white hover:surface-50",onClick:t[9]||(t[9]=e=>l.cancelCreationProcess(e))}),(0,i.Wm)(p)])])],64)}var Gt={components:{Fieldset:ct.Z,InputText:dt.Z,Button:C.Z,InputSwitch:mt.Z,InputNumber:ut.Z,Dropdown:pt.Z,ConfirmPopup:ht.Z},props:{},data(){let e=[],t={name:"",network:{sub:"",domain:null,port:0},status:0,method:"CREATE"},s=JSON.parse(JSON.stringify(t));return{redirect:t,blankRedirect:s,available:e,writing:!1}},methods:{writeRedirect(){this.writing=!0,this.$STORAGE.socket.emit("redirect:write",this.redirect,(e=>{let{error:t}=e;this.$EVENT.emit("showNotification",e),t||this.$EVENT.emit("changeView",0),this.writing=!1}))},getAvailableDomains(){this.$STORAGE.socket.emit("domain:list",(e=>{this.available=e.payload,"UPDATE"!=this.redirect.method&&(this.redirect.network.domain=this.available[0])}))},getUnusedPort(){this.$STORAGE.socket.emit("port:get",(e=>this.redirect.network.port=e.payload))},cancelCreationProcess(e){this.$EVENT.emit("changeView",0)},deleteInstance(e){this.$confirm.require({target:e.currentTarget,message:"Are you sure you want to proceed?",icon:"pi pi-exclamation-triangle",accept:()=>{this.$STORAGE.socket.emit("redirect:delete",this.redirect,(e=>{let{error:t}=e;this.$EVENT.emit("showNotification",e),t||this.$EVENT.emit("changeView",0)}))}})},reset(){this.redirect=JSON.parse(JSON.stringify(this.blankRedirect))},setPayload(e){e?(this.redirect=JSON.parse(JSON.stringify(e)),this.redirect.method="UPDATE"):(this.reset(),this.getUnusedPort(),this.redirect.network.domain=this.available[0],delete this.redirect._id)}},created(){this.getAvailableDomains()}};const zt=(0,o.Z)(Gt,[["render",Zt],["__scopeId","data-v-e785d234"]]);var qt=zt;const Lt=(0,i._)("p",{class:"m-0 mb-3 text-200"},"Overview",-1),Bt={class:"p-3 surface-card border-round"},Mt={class:"flex gap-2"},Jt={class:"flex flex-column flex-auto"},Yt=(0,i._)("p",{class:"m-0 text-xs mb-3"},"Instances",-1),Ft={class:"flex gap-2"},Ht={class:"flex flex-column flex-auto"},Kt=(0,i._)("p",{class:"m-0 text-xs mb-3"},"Redirects",-1),Qt={class:"flex gap-2"};function Xt(e,t,s,n,a,l){const o=(0,i.up)("countItem");return(0,i.wg)(),(0,i.iD)(i.HY,null,[Lt,(0,i._)("div",Bt,[(0,i._)("div",Mt,[(0,i._)("div",Jt,[Yt,(0,i._)("div",Ft,[(0,i.Wm)(o,{str:"Running",num:s.instances.filter((e=>1==e.status)).length,color:"var(--green-400)"},null,8,["num"]),(0,i.Wm)(o,{str:"Stopped",num:s.instances.filter((e=>1!=e.status)).length,color:"var(--red-400)"},null,8,["num"])])]),(0,i._)("div",Ht,[Kt,(0,i._)("div",Qt,[(0,i.Wm)(o,{str:"Enabled",num:s.redirects.filter((e=>1==e.status)).length,color:"var(--surface-400)"},null,8,["num"]),(0,i.Wm)(o,{str:"Disabled",num:s.redirects.filter((e=>1!=e.status)).length,color:"var(--surface-400)"},null,8,["num"])])])])])],64)}var es={components:{countItem:le},props:{instances:Array,redirects:Array}};const ts=(0,o.Z)(es,[["render",Xt]]);var ss=ts;const ns={class:"flex flex-column gap-4"},is=(0,i._)("p",{class:"-mt-1 mb-4 font-italic"},"Change your login data for this app.",-1),as=(0,i._)("p",{class:"text-sm"},"Username",-1),ls=(0,i._)("p",{class:"text-sm"},"Password",-1),os=(0,i._)("p",{class:"-mt-1 mb-4 font-italic"},"Add your github account to pull project data directly from your repos.",-1),rs=(0,i._)("p",{class:"flex text-sm"},[(0,i.Uk)("PAT "),(0,i._)("span",{class:"ml-auto text-400"},"(personal access token)")],-1),cs={class:"flex gap-2 mt-4"},ds={class:"flex justify-content-between align-items-center -mt-1 mb-4"},us=(0,i._)("p",{class:"w-8 font-italic"},"Add your managed domains which points to the server.",-1),ms={class:"w-full flex flex-column justify-content-center gap-2"},ps={class:"m-0 mb-1 ml-3 font-mono select-none"},hs={key:0,class:"m-0 text-300 font-italic"},gs=(0,i._)("p",{class:"mt-0"},"Add domain",-1),fs={class:"p-inputgroup"},ws=(0,i._)("p",{class:"-mt-1 mb-4 font-italic"},"Change the path, where the instances are stored.",-1),xs=(0,i._)("p",{class:"text-sm"},"Path",-1),bs=(0,i._)("p",{class:"-mt-1 mb-4 font-italic"},[(0,i.Uk)("Configure the proxy which handels the redirects to the instances. SSL Encryption by "),(0,i._)("a",{class:"text-primary no-underline",href:"https://www.npmjs.com/package/acme-client"},"acme-client.js/Let's Encrypt"),(0,i.Uk)(".")],-1),vs={class:"flex align-items-center justify-content-between my-4"},ys=(0,i._)("p",{class:"text-sm m-0"},"Proxy",-1),ks={class:"flex align-items-center justify-content-between my-4"},_s=(0,i._)("p",{class:"text-sm m-0"},"Certificates",-1),Es={class:"p-inputgroup w-min"},Vs=(0,i._)("p",{class:"text-sm"},"Maintainer Email",-1);function Ts(e,t,s,n,a,l){const o=(0,i.up)("InputText"),r=(0,i.up)("Button"),c=(0,i.up)("Fieldset"),d=(0,i.up)("OverlayPanel"),u=(0,i.up)("ToggleButton"),m=(0,i.up)("Dialog");return(0,i.wg)(),(0,i.j4)(m,{visible:a.settingsDialog,"onUpdate:visible":t[15]||(t[15]=e=>a.settingsDialog=e),modal:"",draggable:!1,header:"Settings",style:{"max-width":"600px",width:"100%"}},{default:(0,i.w5)((()=>[(0,i._)("div",ns,[(0,i.Wm)(c,{legend:"Login"},{default:(0,i.w5)((()=>[is,as,(0,i.Wm)(o,{class:"w-full",modelValue:a.account.user,"onUpdate:modelValue":t[0]||(t[0]=e=>a.account.user=e)},null,8,["modelValue"]),ls,(0,i.Wm)(o,{class:"w-full",modelValue:a.account.pwd,"onUpdate:modelValue":t[1]||(t[1]=e=>a.account.pwd=e),type:"password"},null,8,["modelValue"]),(0,i.Wm)(r,{label:"Save",icon:"pi pi-save",class:"w-full mt-4",onClick:t[2]||(t[2]=e=>{l.updateNodeupLogin()})})])),_:1}),(0,i.Wm)(c,{legend:"Github"},{default:(0,i.w5)((()=>[os,rs,(0,i.Wm)(o,{class:"w-full",modelValue:a.github.pat,"onUpdate:modelValue":t[3]||(t[3]=e=>a.github.pat=e),type:"password"},null,8,["modelValue"]),(0,i._)("div",cs,[(0,i.Wm)(r,{label:"Save",icon:"pi pi-save",class:"w-6",onClick:t[4]||(t[4]=e=>{l.updateGithubAcc()})}),(0,i.Wm)(r,{label:"Delete",icon:"pi pi-trash",type:"password",class:"w-6 bg-red-500 text-white border-none",onClick:t[5]||(t[5]=e=>{this.github={pat:""},l.updateGithubAcc()})})])])),_:1}),(0,i.Wm)(c,{legend:"Domains"},{default:(0,i.w5)((()=>[(0,i._)("div",ds,[us,(0,i.Wm)(r,{icon:"pi pi-plus",label:"Add",class:"p-button-sm",onClick:t[6]||(t[6]=t=>{e.$refs.addDomOvPa.toggle(t)})})]),(0,i._)("div",ms,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.availableDomains,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"border-round-sm surface-section flex justify-content-between align-items-center"},[(0,i._)("p",ps,(0,U.zw)(e),1),(0,i.Wm)(r,{icon:"pi pi-times",class:"surface-200 text-white border-none",onClick:t=>l.deleteDomain(e)},null,8,["onClick"])])))),128)),0==a.availableDomains.length?((0,i.wg)(),(0,i.iD)("p",hs,"- empty -")):(0,i.kq)("",!0)]),(0,i.Wm)(d,{ref:"addDomOvPa"},{default:(0,i.w5)((()=>[gs,(0,i._)("div",fs,[(0,i.Wm)(o,{modelValue:a.newDomainInput,"onUpdate:modelValue":t[7]||(t[7]=e=>a.newDomainInput=e)},null,8,["modelValue"]),(0,i.Wm)(r,{icon:"pi pi-plus",onClick:t[8]||(t[8]=e=>l.addNewDomain())})])])),_:1},512)])),_:1}),(0,i.Wm)(c,{legend:"Path"},{default:(0,i.w5)((()=>[ws,xs,(0,i.Wm)(o,{class:"w-full",modelValue:a.path,"onUpdate:modelValue":t[9]||(t[9]=e=>a.path=e),spellcheck:"false"},null,8,["modelValue"]),(0,i.Wm)(r,{label:"Save",icon:"pi pi-save",class:"w-full mt-4",onClick:t[10]||(t[10]=e=>{l.setPath()})})])),_:1}),(0,i.Wm)(c,{legend:"Proxy"},{default:(0,i.w5)((()=>[bs,(0,i._)("div",vs,[ys,(0,i.Wm)(u,{modelValue:a.proxy.enabled,"onUpdate:modelValue":t[11]||(t[11]=e=>a.proxy.enabled=e)},null,8,["modelValue"])]),(0,i._)("div",ks,[_s,(0,i._)("div",Es,[(0,i.Wm)(r,{label:"Force",class:"bg-gray-700 text-white border-none",onClick:t[12]||(t[12]=e=>{l.updateCerts(!0)})}),(0,i.Wm)(r,{label:"Update",onClick:t[13]||(t[13]=e=>{l.updateCerts(!1)})})])]),Vs,(0,i.Wm)(o,{class:"w-full",spellcheck:"false",modelValue:a.proxy.maintainerEmail,"onUpdate:modelValue":t[14]||(t[14]=e=>a.proxy.maintainerEmail=e),disabled:!this.proxy.enabled},null,8,["modelValue","disabled"]),(0,i.Wm)(r,{label:"Save",icon:"pi pi-save",class:"w-full mt-4",onClick:l.updateProxy},null,8,["onClick"])])),_:1})])])),_:1},8,["visible"])}var Is=s(2419),Ss=s(4274),As={data(){return{settingsDialog:!1,availableDomains:[],newDomainInput:"",github:{pat:""},account:{user:"",pwd:""},path:"",proxy:{maintainerEmail:"",enabled:!1}}},components:{Dialog:Is.Z,Fieldset:ct.Z,OverlayPanel:wt.Z,InputText:dt.Z,Button:C.Z,ToggleButton:Ss.Z},watch:{"proxy.cluster"(){this.proxy.cluster||(this.proxy.workers=1)}},methods:{fetchAvailableDomains(){this.$STORAGE.socket.emit("domain:list",(e=>this.availableDomains=e.payload))},addNewDomain(){this.$STORAGE.socket.emit("domain:add",{domain:this.newDomainInput},(e=>{let{error:t,msg:s}=e;t?this.$EVENT.emit("showToast",{severity:"error",title:"Error",msg:s}):this.$EVENT.emit("showToast",{severity:"success",title:"Done",msg:s}),this.fetchAvailableDomains(),this.$refs.addDomOvPa.hide(),this.newDomainInput=""}))},deleteDomain(e){this.$STORAGE.socket.emit("domain:delete",{domain:e},(e=>{let{error:t,msg:s}=e;t?this.$EVENT.emit("showToast",{severity:"error",title:"Error",msg:s}):this.$EVENT.emit("showToast",{severity:"success",title:"Done",msg:s}),this.fetchAvailableDomains()}))},fetchGithubAcc(){this.$STORAGE.socket.emit("github:get",(e=>this.github=e.payload))},updateGithubAcc(){this.$STORAGE.socket.emit("github:set",this.github,(e=>{let{error:t,msg:s}=e;t?this.$EVENT.emit("showToast",{severity:"error",title:"Error",msg:s}):this.$EVENT.emit("showToast",{severity:"success",title:"Done",msg:s})}))},updateNodeupLogin(){this.$STORAGE.socket.emit("account:set",this.account,(e=>{let{error:t,msg:s}=e;t?this.$EVENT.emit("showToast",{severity:"error",title:"Error",msg:s}):this.$EVENT.emit("showToast",{severity:"success",title:"Done",msg:s})}))},fetchPath(){this.$STORAGE.socket.emit("path:get",(e=>this.path=e.payload))},setPath(){this.$STORAGE.socket.emit("path:set",{path:this.path},(e=>{let{error:t,msg:s}=e;t?this.$EVENT.emit("showToast",{severity:"error",title:"Error",msg:s}):this.$EVENT.emit("showToast",{severity:"success",title:"Done",msg:s})}))},updateProxy(){this.$STORAGE.socket.emit("proxy:set",this.proxy,(e=>{let{error:t,msg:s}=e;t?this.$EVENT.emit("showToast",{severity:"error",title:"Error",msg:s}):this.$EVENT.emit("showToast",{severity:"success",title:"Done",msg:s})}))},fetchProxy(){this.$STORAGE.socket.emit("proxy:get",(e=>this.proxy=e.payload))},updateCerts(e=!1){this.$STORAGE.socket.emit("proxy:updateCerts",{force:e},(e=>{let{error:t,msg:s}=e;t?this.$EVENT.emit("showToast",{severity:"error",title:"Error",msg:s}):this.$EVENT.emit("showToast",{severity:"success",title:"Done",msg:s})}))},toggleSettingsDialog(e=undefined){this.settingsDialog=e||!this.settingsDialog,this.settingsDialog&&this.update()},update(){this.fetchAvailableDomains(),this.fetchGithubAcc(),this.fetchPath(),this.fetchProxy()}},created(){this.update()}};const $s=(0,o.Z)(As,[["render",Ts]]);var Ds=$s,Ws=(s(7658),s(5269)),Ns=s.n(Ws);function Cs(e){if(""==e.name||""==e.pw)return;const t=hn.config.globalProperties.$STORAGE;t.socket.emit("auth:pw",e,(s=>{e.rememberMe&&Ns().set("token",s),t.token=s,t.authed=!0,on.push("/")}))}function Ps(){const e=hn.config.globalProperties.$STORAGE;let t=Ns().get("token");t&&e.socket.emit("auth:token",{token:t},(t=>{e.token=t,e.authed=!0,on.push("/"),Ns().set("token",t)}))}function Us(){const e=hn.config.globalProperties.$STORAGE;e.token="",e.authed=!1,Ns().remove("token"),on.push("/login")}var Rs={name:"instances",components:{Button:C.Z,Menu:W.Z,Avatar:N.Z,Toast:P.Z,serverInfo:Y,objListItem:ee,countItem:le,instanceView:$e,redirectUpdateView:qt,instanceUpdateView:vt,overview:ss,settings:Ds},data(){let e=[{icon:"pi pi-cog",label:"Settings",command:()=>this.$refs.settings.toggleSettingsDialog()},{icon:"pi pi-refresh",label:"Reload",command:()=>location.reload()},{icon:"pi pi-sign-out",label:"Logout",command:()=>Us()}];return{items:e,logout:Us,sys:{cpu:"0.00",mem:{total:"0.00",used:"0.00"}},redirects:[],instances:[],selectedInstanceId:null,view:0,screen:{width:0,height:0},proxy:{}}},methods:{toggleAvatarMenu(e){this.$refs.menu.toggle(e)},fetchSysInfo(){this.$STORAGE.socket.emit("sysInfo:get",(e=>this.sys=e))},fetchRedirectEnitites(){this.$STORAGE.socket.emit("redirect:list",(e=>this.redirects=e.payload))},fetchInstanceEnitites(){this.$STORAGE.socket.emit("instance:list",(e=>this.instances=e.payload))},changeView(e){0==e&&this.update(),this.view=e},openRedirectView(e){this.changeView(2),i.Y3((()=>{this.$refs.redirectUpdateView?.setPayload(e)}))},openInstanceView(e){this.changeView(1),this.selectedInstanceId=e,i.Y3((()=>{this.$refs.instanceView?.update()}))},openInstanceUpdateView(e){this.changeView(3),i.Y3((()=>{this.$refs.instanceUpdateView?.setPayload(e)}))},showToast(e){let{severity:t,title:s,msg:n}=e;this.$toast.add({severity:t,summary:s,detail:n,life:3e3})},showNotification(e){let t=Array.isArray(e.msg)?e.msg:[e.msg];t.forEach((t=>{this.$toast.add({severity:e.error?"error":"success",summary:e.error?"Error":"Success",detail:t,life:3e3})}))},update(){this.fetchSysInfo(),this.fetchRedirectEnitites(),this.fetchInstanceEnitites(),this.fetchProxySettings()},getScreenSize(){this.screen={width:window.innerWidth,height:window.innerHeight}},fetchProxySettings(){this.$STORAGE.socket.emit("proxy:get",(e=>this.proxy=e.payload))}},created(){this.update(),this.$EVENT.on("changeView",this.changeView),this.$EVENT.on("showToast",this.showToast),this.$EVENT.on("showNotification",this.showNotification),this.$EVENT.on("update",this.update),this.getScreenSize(),window.addEventListener("resize",this.getScreenSize),this.$STORAGE.socket.on("msg:get",this.showNotification)},unmounted(){this.$EVENT.off("changeView",this.changeView),this.$EVENT.off("showToast",this.showToast),this.$EVENT.off("showNotification",this.showNotification),this.$EVENT.off("update",this.update),window.removeEventListener("resize",this.getScreenSize),this.$STORAGE.socket.off("msg:get",this.showNotification)}};const Os=(0,o.Z)(Rs,[["render",D]]);var js=Os;const Zs={class:"flex h-full align-items-center justify-content-center"},Gs={class:"surface-card p-4 shadow-2 border-round w-full lg:w-6 max-w-30rem"},zs=(0,i._)("div",{class:"text-5xl font-monomaniac mb-2 text-center"},[(0,i.Uk)("Node"),(0,i._)("span",{class:"text-primary"},"Core")],-1),qs={key:0,class:"bg-red-600 py-3 px-2 mb-3 flex align-items-center gap-2 fadein animation-duration-300"},Ls=(0,i._)("i",{class:"pi pi-info-circle",style:{"font-size":"2rem"}},null,-1),Bs={class:"m-0"},Ms=(0,i._)("label",{class:"block text-900 font-medium mb-2"},"User",-1),Js=(0,i._)("label",{class:"block text-900 font-medium mb-2"},"Password",-1),Ys={class:"flex align-items-center justify-content-between mb-5"},Fs={class:"flex align-items-center"},Hs=(0,i._)("label",null,"Remember me",-1);function Ks(e,t,s,n,a,l){const o=(0,i.up)("Divider"),r=(0,i.up)("InputText"),c=(0,i.up)("Checkbox"),d=(0,i.up)("Button");return(0,i.wg)(),(0,i.iD)("div",Zs,[(0,i._)("div",Gs,[zs,(0,i.Wm)(o,{class:"mb-3",style:{"background-color":"rgba(255, 255, 255, 0.25)",height:"1px"}}),a.error?((0,i.wg)(),(0,i.iD)("div",qs,[Ls,(0,i._)("p",Bs,(0,U.zw)(a.msg),1)])):(0,i.kq)("",!0),(0,i._)("div",null,[Ms,(0,i.Wm)(r,{type:"text",modelValue:a.user.user,"onUpdate:modelValue":t[0]||(t[0]=e=>a.user.user=e),class:"w-full mb-3"},null,8,["modelValue"]),Js,(0,i.Wm)(r,{type:"password",modelValue:a.user.pw,"onUpdate:modelValue":t[1]||(t[1]=e=>a.user.pw=e),class:"w-full mb-3"},null,8,["modelValue"]),(0,i._)("div",Ys,[(0,i._)("div",Fs,[(0,i.Wm)(c,{binary:!0,modelValue:a.user.rememberMe,"onUpdate:modelValue":t[2]||(t[2]=e=>a.user.rememberMe=e),class:"mr-2"},null,8,["modelValue"]),Hs])]),(0,i.Wm)(d,{label:"Sign In",icon:"pi pi-user",class:"w-full",onClick:t[3]||(t[3]=e=>{a.loginWithPw(a.user)})})])])])}var Qs=s(4870),Xs=s(3647),en=s(3602),tn={name:"login",data(){let e=(0,Qs.iH)({rememberMe:!0,user:"",pw:""});return{user:e,loginWithPw:Cs,msg:"",error:!1}},methods:{enter(e){"Enter"===e.key&&this.loginWithPw(this.user)}},mounted(){this.$EVENT.on("loginError",(e=>{this.msg=e,this.error=!0}))},created(){document.addEventListener("keydown",this.enter)},unmounted(){document.removeEventListener("keydown",this.enter)},components:{Button:C.Z,Divider:Xs.Z,Checkbox:en.Z,InputText:dt.Z}};const sn=(0,o.Z)(tn,[["render",Ks]]);var nn=sn;const an=[{path:"/",name:"Instances",component:js,meta:{title:"Instances",needsAuth:!0}},{path:"/login",name:"Login",component:nn,meta:{title:"Login",needsAuth:!1}}],ln=(0,d.p7)({history:(0,d.r5)(),routes:an});ln.beforeEach(((e,t,s)=>{i.Y3((()=>{document.title=`NodeCore | ${e.meta.title}`})),hn.config.globalProperties.$STORAGE.authed||"/login"===e.path?s():s({path:"/login"})}));var on=ln,rn=s(7729),cn=s(5988),dn=s(2531),un=s(2066);const mn=(0,un.ZP)();mn.on("goto:login",(e=>{let t=hn.config.globalProperties.$EVENT,{msg:s}=e;on.push("/login"),t.emit("loginError",s)}));class pn{constructor(){this.events={}}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}off(e,t){if(this.events[e])for(var s=0;s<this.events[e].length;s++)if(this.events[e][s]===t){this.events[e].splice(s,1);break}}emit(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}}const hn=(0,n.ri)(c);hn.use(on),hn.use(Ns(),{expires:"7d"}),hn.use(rn.Z),hn.use(cn.Z),hn.use(dn.Z),hn.config.globalProperties.$STORAGE={authed:!1,socket:mn};let gn=new pn;hn.config.globalProperties.$EVENT=gn,setInterval((()=>gn.emit("update")),2e3),Ps(),hn.mount("#app")}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,n,i,a){if(!n){var l=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],a=e[d][2];for(var o=!0,r=0;r<n.length;r++)(!1&a||l>=a)&&Object.keys(s.O).every((function(e){return s.O[e](n[r])}))?n.splice(r--,1):(o=!1,a<l&&(l=a));if(o){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,i,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,a,l=n[0],o=n[1],r=n[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(r)var d=r(s)}for(t&&t(n);c<l.length;c++)a=l[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},n=self["webpackChunknode_up"]=self["webpackChunknode_up"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(6682)}));n=s.O(n)})();
//# sourceMappingURL=app.ea18f07a.js.map